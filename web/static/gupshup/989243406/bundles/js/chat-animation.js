!function(t,$){$(function(){var jqwindow=$(window);var eventsList={click:"click",mousedown:"mousedown",touchmove:"touchmove",touchstart:"touchstart",touchend:"touchend",input:"change input",scroll:"scroll",resize:"resize",submit:"submit",submitStat:"submitstat",sizeMode:"sizemode"};var scrollLock=false;var mobileSizeMode=false;var is_native=false;(function(){var nativeOnDevice=["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"];for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<nativeOnDevice.length;t++){if(e.toString().toLowerCase().indexOf(nativeOnDevice[t].toLowerCase())>0){is_native=true;break;}}
if(!is_native){$(".intro .video-background").append($("#video-template").html());}
jqwindow.on(eventsList.resize,function(){var msm=(jqwindow.width()<705);if(mobileSizeMode!=msm){mobileSizeMode=msm;jqwindow.trigger(eventsList.sizeMode);}});})();(function(){var rapitScrollDone=true;var lastPageYOffset=window.pageYOffset;})();(function(){var curWWidth=0;jqwindow.on(eventsList.resize,function(){var act="act";var w=jqwindow.width();if(Math.abs(curWWidth-w)>10){$(".swap").each(function(){$(this).find("ul").attr("style","").data("currentPos",0);$($(this).find(".dots span").removeClass(act)[0]).addClass(act);});curWWidth=w;}}).trigger(eventsList.resize);var swipeStatus=function(event,phase,direction,distance){var speed=200;var obj=$(this);var dots=obj.parent().find(".dots");var objWidth=obj.width()/obj.find("li").length;var duration=0;var maxPos=obj.find("li").length-Math.round($(this).parent().width()/objWidth);var currentPos=parseInt(obj.data("currentPos"));if(maxPos==0){return;}
if(phase=="move"&&(direction=="left"||direction=="right")){if(direction=="left"){scrollGo((objWidth*currentPos)+distance,duration);}else if(direction=="right"){scrollGo((objWidth*currentPos)-distance,duration);}}else if(phase=="cancel"){scrollGo(objWidth*currentPos,speed);}else if(phase=="end"){if(direction=="right"){previousPos();}else if(direction=="left"){nextPos();}}
function previousPos(){currentPos=Math.max(currentPos-1,0);scrollGo(objWidth*currentPos,speed);obj.data("currentPos",currentPos);setDot();}
function nextPos(){currentPos=Math.min(currentPos+1,maxPos);scrollGo(objWidth*currentPos,speed);obj.data("currentPos",currentPos);setDot();}
function scrollGo(distance,duration){var style="transform:translate("+((distance<0?"":"-")+Math.abs(distance).toString())+"px,0);-webkit-transform:translate("+((distance<0?"":"-")+Math.abs(distance).toString())+"px,0);";if(duration>0){style+="transition:transform "+(duration/1000).toFixed(1)+"s ease-out;-webkit-transition:-webkit-transform "+(duration/1000).toFixed(1)+"s ease-out;";}
obj.attr("style",style);}
function setDot(){var act="act";$(dots.find("span").removeClass(act)[currentPos]).addClass(act);}};$(".pressa.swap ul").swipe({triggerOnTouchEnd:true,swipeStatus:swipeStatus,allowPageScroll:"auto",threshold:20,excludedElements:'',fallbackToMouseEvents:false});$(".pressa.swap .dots span").on(eventsList.mousedown,function(){var obj=$(".pressa.swap ul");var cur=parseInt(obj.data("currentPos"));var i=$(this).index();obj.data("currentPos",i-((i-cur)/Math.abs(i-cur)));if(i!=cur){swipeStatus.call(obj,null,"end",(i<cur)?"right":"left",0);}})
$(".you-are-in-a-great .swap ul").swipe({triggerOnTouchEnd:true,swipeStatus:swipeStatus,allowPageScroll:"auto",threshold:20,excludedElements:''});$(".you-are-in-a-great .swap .dots span").on(eventsList.mousedown,function(){var obj=$(".you-are-in-a-great .swap ul");var cur=parseInt(obj.data("currentPos"));var i=$(this).index();obj.data("currentPos",i-((i-cur)/Math.abs(i-cur)));if(i!=cur){swipeStatus.call(obj,null,"end",(i<cur)?"right":"left",0);}})
$(".popup2 .swap ul").swipe({triggerOnTouchEnd:true,swipeStatus:swipeStatus,allowPageScroll:"none",threshold:20,excludedElements:'',fallbackToMouseEvents:false});$(".popup2 .swap .dots span").on(eventsList.mousedown,function(){var obj=$(".popup2 .swap ul");var cur=parseInt(obj.data("currentPos"));var i=$(this).index();obj.data("currentPos",i-((i-cur)/Math.abs(i-cur)));if(i!=cur){swipeStatus.call(obj,null,"end",(i<cur)?"right":"left",0);}})})();(function(){var intro=$(".chat-animation");var messenger=$(".messenger");var chatBox=$(".messenger .box");var chatPage=$(".messenger .page");var chatTabs=$(".messenger .tabs");var maxChatId=chatTabs.find("> *").length-1;var currentChatId=-1;var currentPos=0;var currentMessageId=0;var timeoutId=0;var printedAnim=$("<span class=\"printed-anim\"></span>");var easeOutQuart="cubic-bezier(0.17, 0.84, 0.44, 1) 0ms";var animateStart=function(chatId){clearTimeout(timeoutId);currentChatId=chatId;currentMessageId=0;chatPage.html($("#chat-n"+currentChatId+"-template").html());if(mobileSizeMode){chatPage.attr("style","");}else{currentPos=420;chatPage.attr("style","transform:translateY("+currentPos+"px);-webkit-transform:translateY("+currentPos+"px);");}
goMessageAnimation();$(".printed-anim").each(function(){$(this).remove();});};var showPrintedAnim=function(message){var backgroundImage="background-image";var newPrintedAnim=printedAnim.clone();newPrintedAnim.css(backgroundImage,message.css(backgroundImage));if(mobileSizeMode){chatPage.append(newPrintedAnim);newPrintedAnim.css("top",message.position().top+25);newPrintedAnim.css("right",6);}else{chatBox.append(newPrintedAnim);}
setTimeout(function(){newPrintedAnim.addClass("show");},10);setTimeout(function(){newPrintedAnim.removeClass("show");},2250);setTimeout(function(){newPrintedAnim.remove();},3000);}
var goMessageAnimation=function(){var message=chatPage.find("> div:nth-child("+(currentMessageId+1)+")");var isUser=message.hasClass("right");if(message.length){var timeout=0;if(isUser){if(currentMessageId!=0){timeout=3500;setTimeout(function(){showPrintedAnim(message);},1000);}else{timeout=2500;setTimeout(function(){showPrintedAnim(message);},1);}}
clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(mobileSizeMode){message.addClass("show");}else{currentPos-=(message.height()+16);chatPage.attr("style","transform:translateY("+currentPos+"px); transition: transform 500ms "+easeOutQuart+"; -webkit-transform:translateY("+currentPos+"px); -webkit-transition: -webkit-transform 500ms "+easeOutQuart);}
currentMessageId++;clearTimeout(timeoutId);timeoutId=setTimeout(function(){goMessageAnimation();},(isUser?1000:750));},timeout);}else{clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(currentChatId>=maxChatId){currentChatId=-1;}
chatTabs.find("li:nth-child("+(currentChatId+2)+")").trigger(eventsList.mousedown);},3500);}};var play=function(n){if(currentChatId>-1&&currentMessageId>0){if(mobileSizeMode){chatPage.attr("style","opacity:0;transform:translateY(-55%); transition: transform 400ms "+easeOutQuart+", opacity 500ms "+easeOutQuart+";-webkit-transform:translateY(-55%); -webkit-transition: -webkit-transform 400ms "+easeOutQuart+", opacity 500ms "+easeOutQuart);}else{currentPos-=48;chatPage.attr("style","opacity:0;transform:translateY("+currentPos+"px); transition: transform 400ms "+easeOutQuart+", opacity 500ms "+easeOutQuart+"-webkit-transform:translateY("+currentPos+"px); -webkit-transition: -webkit-transform 400ms "+easeOutQuart+", opacity 500ms "+easeOutQuart);}
clearTimeout(timeoutId);timeoutId=setTimeout(function(){animateStart(n);},500);}else{animateStart(n);}};chatTabs.find("li").on(eventsList.mousedown,function(){var obj=$(this);var newIndex=obj.index();var act="act";if(currentChatId==newIndex){return;}
obj.addClass(act).siblings().removeClass(act);play(newIndex);return false;});jqwindow.on(eventsList.sizeMode,function(){clearTimeout(timeoutId);chatPage.html('');currentChatId=-1;currentMessageId=0;currentPos=0;chatTabs.find(":first-child").trigger(eventsList.mousedown);});setTimeout(function(){chatTabs.find(":first-child").trigger(eventsList.mousedown);},2000);})();});}(this,this.$);